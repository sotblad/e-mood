(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,u){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return u(9546)}])},9546:function(e,t,u){"use strict";u.r(t),u.d(t,{default:function(){return o}});var s=u(5893),D=u(7294),n=u(733),i=u.n(n);function r(e){let{navigateToPage:t,isValid:u}=e,[n,i]=(0,D.useState)(!1),r=()=>{i(e=>!e)},c=()=>{n&&t("calculation")};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center bg-gradient-to-br from-[#f63235] via-[rgb(216, 162, 162)] text-white py-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"E-Mood"}),(0,s.jsx)("p",{className:"text-xl mb-6",children:"An e-food calculator"}),(0,s.jsxs)("p",{className:"mx-auto max-w-xs",children:["Νιώθεις περίεργος και έτοιμος να μάθεις πόσα χρήματα έχεις ",(0,s.jsx)("i",{children:"φάει"})," ","στο e-food?"]}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{class:"flex items-center pt-8",children:[(0,s.jsx)("input",{id:"default-checkbox",type:"checkbox",checked:n,onChange:r,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),(0,s.jsx)("label",{for:"default-checkbox",class:"ms-2 text-sm text-white",children:"Νιώθω έτοιμος"})]}),(0,s.jsx)("button",{className:"bg-white text-[#ff758c] font-medium py-2 px-8 rounded-full",onClick:c,disabled:!n,children:"Υπολογισμός"})]})]}),!u&&(0,s.jsx)("h2",{className:"bg-gray-100 text-gray-500 rounded-lg p-4 font-mono mt-4 max-w-xs",children:"Μπές στη σελίδα του e-food, συνδέσου στον λογαριασμό σου και άνοιξε το extension για να ξεκινήσεις!"})]})}let c=async(e,t)=>{try{let u=await fetch("https://europe-west3-e-mood-api.cloudfunctions.net/gcp-emoodApi/orders?limit=10&offset=".concat(t,"&mode=extended"),{method:"GET",headers:{userCookie:e},credentials:"include"});return await u.json()}catch(e){console.error("Error fetching data:",e.message)}},l=e=>{let t=[100,200,300,400,500,600,700,800,900,1e3,1200,1400,1600,1800,2e3,2200,2400,2600,2800,3e3,3200,3400,3600,3800,4e3,4200,4400,4600,4800,5e3,5200,5400,5600,5800,6e3,6200,6400,6600,6800,7e3,7200,7400,7600,7800,8e3,8200,8400,8600,8800,9e3,9200,9400,9600,9800,1e4],u=["\uD83D\uDE0C","\uD83D\uDE0A","\uD83D\uDE00","\uD83D\uDE10","\uD83D\uDE2C","\uD83D\uDE15","\uD83D\uDE1F","\uD83D\uDE30","\uD83D\uDE28","\uD83D\uDE31","\uD83D\uDE27","\uD83D\uDE22","\uD83D\uDE2D","\uD83D\uDE2B","\uD83E\uDD14","\uD83D\uDE16","\uD83D\uDE21","\uD83E\uDD2F","\uD83E\uDD22","\uD83E\uDD2E","\uD83D\uDC80","☠️","\uD83D\uDC7B","\uD83D\uDC7D","\uD83E\uDD16","\uD83D\uDC7E","\uD83E\uDD21","\uD83D\uDC79","\uD83E\uDD20","\uD83E\uDD11","\uD83E\uDD13","\uD83D\uDE0E","\uD83E\uDD29","\uD83D\uDE0D","\uD83E\uDD73","\uD83C\uDF89","\uD83C\uDF8A","\uD83C\uDFC6","\uD83D\uDE31","\uD83D\uDE28","\uD83D\uDE30","\uD83D\uDE1F","\uD83D\uDE15","\uD83D\uDE2C","\uD83D\uDE10","\uD83D\uDE00","\uD83D\uDE0A","\uD83D\uDE0C","\uD83D\uDE07","\uD83E\uDD20","\uD83D\uDE0E","\uD83E\uDD11","\uD83E\uDD13","\uD83D\uDE0D","\uD83D\uDE18","\uD83D\uDCA3"];for(let s=0;s<t.length;s++)if(e<t[s])return u[s];return"\uD83D\uDCA3"};function a(e){let{navigateToPage:t,cookie:u}=e,[n,i]=(0,D.useState)([]),[r,a]=(0,D.useState)(),[o,d]=(0,D.useState)();(0,D.useEffect)(()=>{let e=async()=>{try{let e=!0,t=0;for(;e;){let s=await c(u,t);e=s.data.hasNext;let D=s.data.orders;0==t&&d(D[0].submission_date),a(D[D.length-1].submission_date);let n=D.map(e=>e.price);i(e=>[...e,...n]),t+=10}}catch(e){console.error("Error fetching data:",e.message)}};e()},[]);let f=n.reduce((e,t)=>e+t,0).toFixed(2),x=l(f);return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center bg-gradient-to-br from-[#f63235] via-[rgb(216, 162, 162)] text-white py-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"E-Mood"}),(0,s.jsxs)("div",{className:"bg-white w-full rounded-lg p-6 shadow-lg flex flex-col items-center text-gray-800 mb-4",children:[(0,s.jsxs)("p",{className:"mb-8",children:["Έχεις ",(0,s.jsx)("i",{children:"φάει"})]}),(0,s.jsxs)("div",{className:"text-5xl font-bold mb-2 flex items-center",children:[f,"€ ",x]}),(0,s.jsxs)("div",{class:"text-center",children:[(0,s.jsx)("p",{class:"text-sm",children:"μεταξύ"}),(0,s.jsxs)("div",{class:"inline-flex",children:[(0,s.jsx)("p",{class:"text-sm font-medium",children:r}),(0,s.jsx)("p",{class:"text-sm mx-2",children:"και"}),(0,s.jsx)("p",{class:"text-sm font-medium",children:o})]})]})]}),(0,s.jsx)("button",{className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 mt-4 bg-[#ff6464] hover:bg-[#ff5a5a] text-white",onClick:()=>t("index"),children:"Πίσω"})]})}function o(){let[e,t]=(0,D.useState)("index"),[u,n]=(0,D.useState)(!1),[l,o]=(0,D.useState)(""),[d,f]=(0,D.useState)(!1),x=e=>{t(e)};return(0,D.useEffect)(()=>{chrome.runtime.sendMessage({action:"getActiveTabInfo"},async e=>{if(f(!0),e.tabInfo.url.includes("e-food.gr")){let t=e.tabInfo.cookies.join("; ");o(t);let u=await c(t,0);if("authentication_error"===u.error_code){n(!1);return}n(!0)}f(!1)})},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{display:d?"flex":"none"},className:"fixed z-10 inset-0 overflow-hidden bg-black bg-opacity-40 flex items-center justify-center",children:(0,s.jsx)("div",{className:"m-auto p-20 flex items-center",children:(0,s.jsx)(i(),{type:"spin",color:"#ffffff",height:100,width:100})})}),"index"===e&&(0,s.jsx)(r,{navigateToPage:x,isValid:u,cookie:l}),"calculation"===e&&(0,s.jsx)(a,{navigateToPage:x,cookie:l})]})}}},function(e){e.O(0,[733,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);